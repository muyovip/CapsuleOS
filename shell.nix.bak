{ pkgs ? import {} }:

cat > shell.nix << 'EOF'
{ pkgs ? import {} }:

pkgs.mkShell {
  buildInputs = with pkgs; [
    rustc cargo clippy rustfmt
    git gnupg
    openssl pkg-config
    nix
  ];

  shellHook = ''
    export CARGO_HOME="$PWD/.cargo"
    export PATH="$CARGO_HOME/bin:$PATH"
    echo "CapsuleOS Dev Shell Activated â€” cos(Blue) = 1"
  '';
}
EOF